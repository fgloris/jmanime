# 视频分析与处理

## 什么是容器格式，编码格式

### 容器格式

视频是一种包含图像流、声音流、字幕流等多种媒体的文件，容纳这些流的文件格式称为**容器**。一个视频文件的容器格式并不取决于它的后缀名，而取决于它的头信息和封装信息。不同的容器格式支持不同的媒体流编码。

常见的容器格式有：
- MP4（MPEG-4 Part 14，文件扩展名为 .mp4 或 .m4v），一种非常流行的容器格式，广泛用于网络流和移动设备。MP4通常与H.264编码标准结合使用，后者提供了很好的压缩效率和视频质量，适合在线视频和移动媒体。
- AVI（Audio Video Interleave，文件扩展名为 .avi），一种较早的容器格式，它支持多种编码器，但通常不提供与现代压缩标准相当的压缩效率。AVI文件往往比其他格式大，因为它没有采用最新的压缩技术。
- MKV（Matroska Video，文件扩展名为 .mkv），一个开放源代码的容器格式，它设计用于容纳多种不同编码的视频、音频和字幕流。MKV文件可以包含高比特率的视频流，适合存储高清视频。
- MOV（QuickTime Movie，文件扩展名为 .mov）
- FLV（Flash Video，文件扩展名为 .flv）
- WMV（Windows Media Video，文件扩展名为 .wmv）
- WebM：由Google支持的开源容器格式，通常与VP8或VP9编码器一起使用。WebM旨在提供网络友好的视频压缩，适合HTML5视频播放。

每种封装格式都有其特定的用途和优化目标，选择哪种格式通常取决于视频的使用场景、所需的兼容性、压缩效率和编码器的支持。

### 编码格式

媒体流的**编码格式**会影响音视频的压缩效率，即清晰度和文件大小。清晰度在这里是一个主观的概念，它由视频图像分辨率、色深等很多因素决定。每一种媒体流都会有一系列编码方式，如视频流、音频流。

常见的视频编码格式有：


- #### 视频常见压缩方式
- ####



# JWT令牌

## 计算与构成

JWT(**json web token**)由三个部分构成，他们之间用"."隔开。假设我们要重新计算一个jwt，需要从一个json开始。

- 第一部分是header，表示令牌类型和加密方式。

  ```json
  {
      'typ':'JWT',
      'alg':'HS256'
  }
  ```

- 第二部分是playload（载体），存储验证用的**信息**（即声明claims）。

  ```json
  {
  	'sub':'123456780',
      'name':'john',
      'admin':'true'
  }
  ```

- 第三部分是签名，用于验证。先把前两部分用"."隔开，并用base64编码。再用header声明的加密方式把编码结果进行加盐加密，**密钥**在服务器设置，例如“my_jwt_secret”，然后放在第三部分，用"."隔开。

这样生成的jwt有以下特点：

- json内的数据**没有加密**，只有编码，任何人得到了jwt都可以知道传输的是什么。所以jwt不应该携带密码等重要信息。
- jwt的第三部分（签名）用于验证是否是由密钥生成的（验证jwt是否合法），密钥存放在服务器。
- 如果有攻击者拿到了jwt但没有服务器内的密钥，他无法改动前两部分的内容，因为签名的生成用到了前两部分的信息。
- 所以我们可以在playload里面设置到期时间。

jwt常用于**保存用户登录状态**。用户登录时从服务器得到一个jwt，此后每次请求附带jwt，让服务器验证请求是否合法。



# 邮箱验证流程

## 邮箱协议：SMTP（发信）、POP3（收信）、IMAP（收信）

- **SMTP**（simple mail transfer protocol）即简单邮件传输协议，属于 TCP/IP 协议簇，它是一组用于从源地址到目的地址传输邮件的规范，通过它来控制邮件的中转方式，帮助每台计算机在发送或中转信件时找到下一个目的地。SMTP是一个“推”的协议，它不允许根据需要从远程服务器上“拉”来消息。SMTP 服务器就是遵循 SMTP 协议的发送邮件服务器。
  SMTP 认证，简单地说就是要求必须在提供了账户名和密码之后才可以登录 SMTP 服务器，避免受到垃圾邮件的侵扰。

- **POP3**（Post Office Protocol 3）即邮局协议的第3个版本,是TCP/IP协议族中的一员（默认端口是110）。本协议主要用于支持使用客户端远程管理在服务器上的电子邮件。,它规定怎样将个人计算机连接到Internet的邮件服务器和下载电子邮件的电子协议。它是因特网电子邮件的第一个离线协议标准,POP3允许用户从服务器上把邮件存储到本地主机（即自己的计算机）上,同时删除保存在邮件服务器上的邮件，而POP3服务器则是遵循POP3协议的接收邮件服务器，用来接收电子邮件的。

  简单来说，POP服务器是用来收信的，而且每个E_mail地址一般只有一个。如果你要同时收取多个邮箱的信件，就必须挨个设置每个邮箱的POP3服务器地址,在你申请了免费信箱之后，仔细看看它的帮助文件，一般都能找到。至于SMTP服务器，可以理解为就是用来寄信的，而且大多数SMTP服务器也是免费的，也就是说，不管你有无E-mail信箱，只要想寄信，随便填上一个SMTP服务器，就可以寄信了。如果你用Outlook Express或者其它邮件程序发信，又同时拥有多个免费邮箱，不必设置多个SMTP服务器，只要选择一个填上就行了，比如新浪邮件提供的服务器就是：smtp.sina.com.cn

- **IMAP**（Internet Mail Access Protocol）即交互式邮件存取协议，是一个应用层协议（端口是143）。用来从本地邮件客户端（Outlook Express、Foxmail、Mozilla Thunderbird等）访问远程服务器上的邮件。它是跟POP3类似邮件访问标准协议之一。**不同的是，开启了IMAP后，您在电子邮件客户端收取的邮件仍然保留在服务器上，同时在客户端上的操作都会反馈到服务器上**，如：删除邮件，标记已读等，服务器上的邮件也会做相应的动作。所以无论从浏览器登录邮箱或者客户端软件登录邮箱，看到的邮件以及状态都是一致的。

- **SSL （Secure Sockets Layer）加密**：在任意一个协议中均可使用。SSL 握手过程如下。

  当客户端（如邮件客户端）与服务器（如 163 邮箱服务器）建立 SSL 连接时，会发生以下过程：

  1. **客户端问候**：客户端向服务器发送支持的加密算法列表
  2. **服务器问候**：服务器选择加密算法并发送其 SSL 证书
  3. **验证证书**：客户端验证服务器证书的有效性
  4. **密钥交换**：双方协商生成会话密钥
  5. **安全通信**：使用会话密钥加密所有后续通信

## 如何保存验证码？

LTdtYt6DUbEKHZWb

EQeKv32WRZfiSFsi
